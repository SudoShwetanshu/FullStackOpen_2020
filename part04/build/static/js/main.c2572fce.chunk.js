(this["webpackJsonpbloglist-frontend"]=this["webpackJsonpbloglist-frontend"]||[]).push([[0],{50:function(e,t,n){e.exports=n(88)},55:function(e,t,n){},88:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),c=n(17),l=n.n(c),u=(n(55),n(2)),o=n.n(u),i=n(4),s=n(9),m=r.a.forwardRef((function(e,t){var n=Object(a.useState)(!1),c=Object(s.a)(n,2),l=c[0],u=c[1],o=Object(a.useState)(!0),i=Object(s.a)(o,2),m=i[0],p=i[1],d={display:l?"none":""},f={display:l?"":"none"},b={display:m?"":"none"},E=function(){u(!l)},v=function(){p(!m)};return Object(a.useImperativeHandle)(t,(function(){return{toggleVisibility:E,toggleVisible:v}})),r.a.createElement("div",{style:b},r.a.createElement("div",{style:d},r.a.createElement("button",{className:"toggleOpen",onClick:E},e.buttonLabel)),r.a.createElement("div",{style:f,className:"togglableContent"},e.children,r.a.createElement("button",{className:"minorbutton",onClick:E},"cancel")))})),p={paddingTop:10,paddingLeft:2,border:"solid",borderWidth:1,marginBottom:5},d=function(e){var t,n,a,c,l,u=e.blog,o=e.user,i=e.deleteButtonAction,s=e.likeButtonAction,d={display:o&&(null===u||void 0===u||null===(t=u.user)||void 0===t||null===(n=t.username)||void 0===n?void 0:n.toString())===(null===o||void 0===o||null===(a=o.username)||void 0===a?void 0:a.toString())||(null===u||void 0===u||null===(c=u.user)||void 0===c?void 0:c.id)===(null===o||void 0===o||null===(l=o.id)||void 0===l?void 0:l.toString())?"":"none"};return r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{style:p,className:"blog"},r.a.createElement("div",null," ",r.a.createElement("span",{className:"blog_title"}," ",r.a.createElement("h3",null,u.title)," "),r.a.createElement("span",{className:"blog_author"},"Author: ",u.author),r.a.createElement(m,{buttonLabel:"view"},r.a.createElement("br",null),r.a.createElement("div",null,"LIKES : ",u.likes," ",r.a.createElement("button",{className:"submitbutton",onClick:function(){return function(e){s(e)}(u)}},"like")),r.a.createElement("br",null),r.a.createElement("div",null,"URL:  ",u.url," "),r.a.createElement("br",null),r.a.createElement("div",null,r.a.createElement("button",{style:d,className:"deletebutton",onClick:function(){return function(e){window.confirm('Do you want to delete you blog "'.concat(e.title,'"'))&&i(e)}(u)}},"Delete Blog"),"  ")))))},f=n(13),b=n(91),E=n(92),v=function(){var e={paddingRight:20};return r.a.createElement("div",null,r.a.createElement(b.a,{collapseOnSelect:!0,expand:"lg",bg:"dark",variant:"dark"},r.a.createElement(b.a.Brand,{href:"#"},"BlogList App"),r.a.createElement(b.a.Toggle,{"aria-controls":"responsive-navbar-nav"}),r.a.createElement(b.a.Collapse,{id:"responsive-navbar-nav"},r.a.createElement(E.a,{className:"mr-auto"},r.a.createElement(E.a.Link,{href:"#",as:"span"},r.a.createElement(f.b,{style:e,to:"/"},"home")),r.a.createElement(E.a.Link,{href:"#",as:"span"},r.a.createElement(f.b,{style:e,to:"/users"},"users")),r.a.createElement(E.a.Link,{href:"#",as:"span"},r.a.createElement(f.b,{style:e,to:"/blogs"},"blogs"))))))},g=n(10),h=function(){var e=Object(g.c)((function(e){return e.users}));return r.a.createElement("div",null,r.a.createElement("table",{style:{width:"40%",border:"2px solid black"}},r.a.createElement("tr",null,r.a.createElement("td",null,r.a.createElement("strong",null,"User")),"  ",r.a.createElement("td",null,r.a.createElement("strong",null,"No. Of Blogs"),"  ")),e.map((function(e){return r.a.createElement("tr",{key:e.id},r.a.createElement(f.b,{key:e.id,to:"/users/".concat(e.id)},r.a.createElement("td",null,e.name," ")," ",r.a.createElement("td",null," ",e.blogs.length)))}))))},y=function(e){var t=e.onSubmit,n=Object(a.useState)(""),c=Object(s.a)(n,2),l=c[0],u=c[1],o=Object(a.useState)(""),i=Object(s.a)(o,2),m=i[0],p=i[1];return r.a.createElement("div",null,r.a.createElement("h1",null,"Login to the application"),r.a.createElement("form",{onSubmit:function(e){e.preventDefault(),t({username:l,password:m}),u(""),p("")}},r.a.createElement("div",null," username: ",r.a.createElement("input",{id:"username",type:"text",value:l,onChange:function(e){console.log(l),u(e.target.value)},name:"Username",autoComplete:"on"})," "),r.a.createElement("div",null," password: ",r.a.createElement("input",{id:"password",type:"password",value:m,onChange:function(e){p(e.target.value)},name:"Password",autoComplete:"on"})," "),r.a.createElement("button",{id:"login-btn",type:"submit"},"Login!")))},O=n(15),w=n.n(O),j="/api/blogs",k=null,S={getAll:function(){return w.a.get(j).then((function(e){return e.data}))},setToken:function(e){k="bearer ".concat(e)},create:function(){var e=Object(i.a)(o.a.mark((function e(t){var n,a;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n={headers:{Authorization:k}},e.next=3,w.a.post(j,t,n);case 3:return a=e.sent,e.abrupt("return",a.data);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),remove:function(){var e=Object(i.a)(o.a.mark((function e(t){var n,a;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n={headers:{Authorization:k}},e.next=3,w.a.delete("".concat(j,"/").concat(t),n);case 3:return a=e.sent,e.abrupt("return",a.data);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),update:function(){var e=Object(i.a)(o.a.mark((function e(t,n){var a;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,w.a.put("".concat(j,"/").concat(t),n);case 2:return a=e.sent,e.abrupt("return",a.data);case 4:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),comment:function(){var e=Object(i.a)(o.a.mark((function e(t,n){var a;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,w.a.post("".concat(j,"/").concat(n,"/comments"),{comment:t});case 2:return a=e.sent,e.abrupt("return",a.data);case 4:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()},x={signUp:function(){var e=Object(i.a)(o.a.mark((function e(t){var n;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,w.a.post("/api/users",t);case 2:return n=e.sent,e.abrupt("return",n.data);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),getAll:function(){return w.a.get("/api/users").then((function(e){return e.data}))}},N=n(5),R=function(e){var t=e.submit,n=Object(a.useState)(""),c=Object(s.a)(n,2),l=c[0],u=c[1],o=Object(a.useState)(""),i=Object(s.a)(o,2),m=i[0],p=i[1],d=Object(a.useState)(""),f=Object(s.a)(d,2),b=f[0],E=f[1],v=Object(N.f)();return r.a.createElement("div",null," ",r.a.createElement("h2",null,"Create New Blog!"),r.a.createElement("form",{onSubmit:function(e){e.preventDefault(),t({author:m,title:l,url:b}),E(""),p(""),u(""),v.push("/")}},r.a.createElement("p",null,"title: ",r.a.createElement("input",{type:"text",name:"Title",onChange:function(e){u(e.target.value)},value:l,required:!0,id:"newblog-title"}),"  "),r.a.createElement("p",null,"author: ",r.a.createElement("input",{type:"text",name:"Author",onChange:function(e){p(e.target.value)},value:m,required:!0,id:"newblog-author"}),"  "),r.a.createElement("p",null,"URL: ",r.a.createElement("input",{type:"text",name:"URL",onChange:function(e){E(e.target.value)},value:b,required:!0,id:"newblog-url"}),"    "),r.a.createElement("p",null," ",r.a.createElement("button",{className:"submitbutton",type:"submit",id:"newblog-submit-btn"},"Submit")," ")))},T=function(e){var t=e.onSubmit,n=Object(a.useState)(""),c=Object(s.a)(n,2),l=c[0],u=c[1],o=Object(a.useState)(""),i=Object(s.a)(o,2),m=i[0],p=i[1],d=Object(a.useState)(""),f=Object(s.a)(d,2),b=f[0],E=f[1];return r.a.createElement("div",null,r.a.createElement("h1",null,"Sign up"),r.a.createElement("form",{onSubmit:function(e){e.preventDefault(),t({username:l,name:b,password:m}),u(""),p(""),E("")}},r.a.createElement("div",null," username: ",r.a.createElement("input",{type:"text",value:l,onChange:function(e){u(e.target.value)},name:"Username",autoComplete:"on"})," "),r.a.createElement("div",null," name: ",r.a.createElement("input",{type:"text",value:b,onChange:function(e){E(e.target.value)},name:"Name",autoComplete:"on"})," "),r.a.createElement("div",null," password: ",r.a.createElement("input",{type:"password",value:m,onChange:function(e){p(e.target.value)},name:"Password",autoComplete:"on"})," "),r.a.createElement("button",{type:"submit"},"Create Account")))},L=function(){var e=Object(g.c)((function(e){return e.notification}));return""===e?null:r.a.createElement("div",{className:"notification"},e)},_=function(){var e=Object(g.c)((function(e){return e.error}));return""===e?null:r.a.createElement("div",{className:"error"},e)},C=n(33),I=n(26),B=function(e){return function(){var t=Object(i.a)(o.a.mark((function t(n){var a;return o.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,S.create(e);case 2:a=t.sent,n({type:"CREATE_BLOG",payload:{data:a}});case 4:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()},U=function(e){return function(){var t=Object(i.a)(o.a.mark((function t(n){return o.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,S.remove(e.id);case 2:n({type:"REMOVE_BLOG",payload:{data:e}});case 3:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()},A=function(e){return function(){var t=Object(i.a)(o.a.mark((function t(n){var a,r;return o.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a=Object(C.a)(Object(C.a)({},e),{},{likes:e.likes+1}),t.next=3,S.update(e.id,a);case 3:r=t.sent,n({type:"LIKE_BLOG",payload:{data:r}});case 5:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()},M=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"INIT_BLOGS":return t.payload.data;case"CREATE_BLOG":return[].concat(Object(I.a)(e),[t.payload.data]);case"REMOVE_BLOG":return e.filter((function(e){return e!==t.payload.data}));case"LIKE_BLOG":return e.map((function(e){return e.id!==t.payload.data.id?e:t.payload.data}));case"COMMENT":return null;default:return e}},G=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SIGN_UP":return[].concat(Object(I.a)(e),[e.payload.data]);case"INIT_USERS_LIST":return t.payload.data;default:return e}},D=0,V=function(e){return function(){var t=Object(i.a)(o.a.mark((function t(n){return o.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:clearTimeout(D),n({type:"REM_NOTIF"}),n({type:"SET_NOTIF",payload:{notification:"".concat(e)}}),D=setTimeout((function(){return n({type:"REM_NOTIF"})}),5e3);case 4:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()},F=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SET_NOTIF":return t.payload.notification;case"REM_NOTIF":return"";default:return e}},J=0,K=function(e){return function(){var t=Object(i.a)(o.a.mark((function t(n){return o.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:clearTimeout(J),n({type:"REM_ERR"}),n({type:"SET_ERR",payload:{error:"".concat(e)}}),J=setTimeout((function(){return n({type:"REM_ERR"})}),5e3);case 4:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()},q=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SET_ERR":return t.payload.error;case"REM_ERR":return"";default:return e}},P={login:function(){var e=Object(i.a)(o.a.mark((function e(t){var n;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,w.a.post("/api/login",t);case 2:return n=e.sent,e.abrupt("return",n.data);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},W=function(){return function(){var e=Object(i.a)(o.a.mark((function e(t){var n,a;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:(n=window.localStorage.getItem("loggedBlogappUser"))&&(a=JSON.parse(n),t({type:"INIT_USER",payload:{data:a}}),S.setToken(a.token));case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},z=function(e){return function(){var t=Object(i.a)(o.a.mark((function t(n){var a;return o.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,P.login(e);case 3:return a=t.sent,window.localStorage.setItem("loggedBlogappUser",JSON.stringify(a)),n(W()),t.next=8,S.setToken(a.token);case 8:t.next=13;break;case 10:t.prev=10,t.t0=t.catch(0),n(K("Wrong Credentials"));case 13:case"end":return t.stop()}}),t,null,[[0,10]])})));return function(e){return t.apply(this,arguments)}}()},H=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"INIT_USER":return t.payload.data;case"REMOVE_USER":return null;default:return e}},Q=function(e){e.user,e.handleDelete,e.handleLike;var t=Object(g.c)((function(e){return e.blogs.sort((function(e,t){return e.likes>t.likes?-1:1}))}));return r.a.createElement("div",null,r.a.createElement("h2",null,"blogs"),t.map((function(e){return r.a.createElement(f.b,{key:e.id,to:"/blogs/".concat(e.id)},r.a.createElement("li",{key:e.id},e.title))})))},X=function(e){var t=e.user;return r.a.createElement("div",null,r.a.createElement("h2",null," ",null===t||void 0===t?void 0:t.name," "),r.a.createElement("br",null),r.a.createElement("h5",null,"Added blogs"),r.a.createElement("br",null),r.a.createElement("div",null,null===t||void 0===t?void 0:t.blogs.map((function(e){return r.a.createElement("li",null,e.title)}))))},Y=function(){var e=Object(g.c)((function(e){return e.blogs})),t=Object(g.c)((function(e){return e.users})),n=Object(a.useState)(null),c=Object(s.a)(n,2),l=c[0],u=c[1],p=Object(g.c)((function(e){return e.login})),f=Object(a.useRef)(),b=Object(a.useRef)(),E=Object(g.b)();Object(a.useEffect)((function(){E(function(){var e=Object(i.a)(o.a.mark((function e(t){var n;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,S.getAll();case 2:n=e.sent,t({type:"INIT_BLOGS",payload:{data:n}});case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}())}),[E]),Object(a.useEffect)((function(){E(function(){var e=Object(i.a)(o.a.mark((function e(t){var n;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,x.getAll();case 2:n=e.sent,t({type:"INIT_USERS_LIST",payload:{data:n}});case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}())}),[E]),Object(a.useEffect)((function(){E(W())}),[E]);var O=Object(N.g)("/blogs/:id"),w=O?e.find((function(e){return e.id===O.params.id})):null,j=Object(N.g)("/users/:id"),k=j?t.find((function(e){return e.id===j.params.id})):null,C=function(){var e=Object(i.a)(o.a.mark((function e(t){return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:E(z(t));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),I=function(){window.localStorage.clear(),E(function(){var e=Object(i.a)(o.a.mark((function e(t){return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:window.localStorage.clear(),t({type:"REMOVE_USER"});case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}())},M=function(){var e=Object(i.a)(o.a.mark((function e(t){var n;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,x.signUp(t);case 3:n=e.sent,b.current.toggleVisibility(),E(V("Account created! Username: ".concat(n.username,". Kindly login with this username and your password."))),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(0),E(K("".concat(e.t0.response.data.error)));case 11:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(t){return e.apply(this,arguments)}}(),G=function(){var e=Object(i.a)(o.a.mark((function e(t){return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:f.current.toggleVisibility(),E(B(t));case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),D=function(){var e=Object(i.a)(o.a.mark((function e(t){return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:E(U(t));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),F=function(){var e=Object(i.a)(o.a.mark((function e(t){return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:E(A(t));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),J=function(){var e=Object(i.a)(o.a.mark((function e(t){var n;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),e.next=3,S.comment(l,w.id);case 3:n=e.sent,console.log(n),u("");case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return r.a.createElement("div",{className:"containerprimary"},r.a.createElement(v,{className:"containernav"}),r.a.createElement("h1",null,"Blogs"),r.a.createElement("br",null),r.a.createElement("div",{className:"messagearea"},r.a.createElement(L,null),r.a.createElement(_,null)),r.a.createElement("div",{className:"toggles"},r.a.createElement("div",null,null===p&&r.a.createElement("div",{className:"inlineclass"},r.a.createElement("div",{className:"marginr"},r.a.createElement(m,{buttonLabel:"User Login"},r.a.createElement(y,{onSubmit:C}))),r.a.createElement("div",{className:"marginl"},r.a.createElement(m,{buttonLabel:"Sign Up",ref:b},r.a.createElement(T,{onSubmit:M}))))),r.a.createElement("div",null,null!==p&&r.a.createElement("div",null,r.a.createElement("b",null,p.name)," is logged in.",r.a.createElement("button",{className:"minorbutton",onClick:I},"logout"),r.a.createElement("br",null)," ",r.a.createElement("br",null),r.a.createElement("div",null,r.a.createElement("br",null),r.a.createElement(m,{buttonLabel:"New Blog",ref:f}," ",r.a.createElement(R,{blogs:e,submit:G})," ")))),r.a.createElement("br",null),r.a.createElement("br",null)," ",r.a.createElement("br",null)," ",r.a.createElement("br",null)),r.a.createElement(N.c,null,r.a.createElement(N.a,{path:"/blogs/:id"},w&&r.a.createElement("div",null,r.a.createElement("h2",null,w.title),r.a.createElement("a",{href:"//".concat(w.url),rel:"noopener noreferrer",target:"_blank"},w.url),r.a.createElement("div",null,"has ",r.a.createElement("strong",null,w.likes),"  likes ",r.a.createElement("button",{onClick:function(){return E(A(w))}},"like")),"added by ",w.user.username,r.a.createElement("br",null)," ",r.a.createElement("br",null)," ",r.a.createElement("br",null),r.a.createElement("h3",null,r.a.createElement("strong",null,"Comments(anonymous):")),r.a.createElement("form",{onSubmit:J},r.a.createElement("input",{value:l,onChange:function(e){return u(e.target.value)}}),r.a.createElement("button",null,"submit")),w.comments.map((function(e){return r.a.createElement("li",{key:e},e)})))),r.a.createElement(N.a,{path:"/blogs"},r.a.createElement("div",null,r.a.createElement(Q,null))),r.a.createElement(N.a,{path:"/users/:id"},r.a.createElement(X,{user:k})),r.a.createElement(N.a,{path:"/users"},r.a.createElement(h,null)),r.a.createElement(N.a,{path:"/"},r.a.createElement("div",null,r.a.createElement("h2",null,"blogs"),e.sort((function(e,t){return e.likes>t.likes?-1:1}))&&e.map((function(e){return r.a.createElement(d,{key:null===e||void 0===e?void 0:e.id,blog:e,user:p,deleteButtonAction:D,likeButtonAction:F})}))))),r.a.createElement("br",null))},Z=n(21),$=n(48),ee=n(49),te=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0;return t.type,e},ne=Object(Z.combineReducers)({blogs:M,users:G,notification:F,error:q,comments:te,login:H}),ae=Object(Z.createStore)(ne,Object(ee.composeWithDevTools)(Object(Z.applyMiddleware)($.a)));n(87);l.a.render(r.a.createElement(g.a,{store:ae}," ",r.a.createElement(f.a,null,r.a.createElement(Y,null)),"  "),document.getElementById("root"))}},[[50,1,2]]]);
//# sourceMappingURL=main.c2572fce.chunk.js.map